# Web 界面使用指南

## 🚀 启动 Web 服务器

### 基本启动

```bash
python app.py
```

服务器将在 `http://localhost:8080` 启动（默认端口，避免与 macOS AirPlay 冲突）。

### 自定义配置

通过环境变量配置：

```bash
# 指定配置文件
export CONFIG_PATH=config_local.yaml

# 指定端口（默认 8080，避免与 macOS AirPlay 冲突）
export PORT=8080

# 启用调试模式
export DEBUG=True

python app.py
```

## 📱 界面功能

### 1. 文本输入模式

1. 点击 **"文本输入"** 标签
2. 在文本框中粘贴或输入语音识别文本
3. 选择处理模式：
   - **完整版**：逐句重写，生成正式文稿
   - **会议纪要**：生成结构化摘要
   - **两者都生成**：同时生成完整版和会议纪要
4. 点击 **"开始处理"** 按钮
5. 等待处理完成，查看结果

### 2. 文件上传模式

1. 点击 **"文件上传"** 标签
2. 点击上传区域选择文件，或直接拖拽文件到上传区域
3. 支持格式：`.txt`, `.md`
4. 选择处理模式
5. 点击 **"开始处理"** 按钮
6. 处理完成后可查看结果并下载

### 3. 查看结果

- 处理完成后，结果会显示在输出区域
- 如果生成了完整版和会议纪要，可以通过标签页切换查看
- 结果以纯文本形式显示，便于复制

### 4. 下载文档

处理完成后，可以下载以下格式：

- **📄 Word (.docx)**：适合编辑和打印
- **📕 PDF (.pdf)**：适合存档和分享
- **📝 Markdown (.md)**：适合版本控制和编辑

点击对应的下载按钮即可下载文件。

## 🎨 界面特点

- **现代化设计**：简洁美观的用户界面
- **响应式布局**：支持桌面和移动设备
- **实时反馈**：处理进度和状态提示
- **错误处理**：友好的错误提示信息
- **拖拽上传**：支持文件拖拽上传

## 🔧 API 接口

Web 应用提供以下 REST API：

### POST /api/process

处理文本内容

**请求体：**
```json
{
  "text": "文本内容",
  "mode": "full"  // full, summary, both
}
```

**响应：**
```json
{
  "success": true,
  "results": {
    "full": "完整版内容",
    "summary": "会议纪要内容"
  }
}
```

### POST /api/upload

上传文件处理

**请求：**
- `file`: 文件（multipart/form-data）
- `mode`: 处理模式

**响应：**
```json
{
  "success": true,
  "results": {
    "full": "完整版内容",
    "summary": "会议纪要内容"
  },
  "downloads": {
    "docx": "文件路径",
    "pdf": "文件路径"
  }
}
```

### POST /api/export

导出文件

**请求体：**
```json
{
  "content": "文本内容",
  "format": "docx",  // docx, pdf, markdown
  "mode": "full"
}
```

**响应：**
```json
{
  "success": true,
  "filepath": "文件路径",
  "filename": "文件名"
}
```

### GET /api/download

下载文件

**参数：**
- `path`: 文件路径

### GET /api/health

健康检查

**响应：**
```json
{
  "status": "ok",
  "initialized": true
}
```

## 🐛 故障排除

### 问题：系统未初始化

**原因：** 配置文件错误或 API 密钥未设置

**解决：**
1. 检查 `config.yaml` 或 `config_local.yaml` 配置
2. 确保 API 密钥已正确设置（在配置文件或环境变量中）
3. 查看控制台错误信息

### 问题：处理失败

**原因：** 可能是网络问题、API 限制或文本过长

**解决：**
1. 检查网络连接
2. 确认 API 密钥有效且有足够配额
3. 尝试处理较短的文本
4. 查看浏览器控制台的错误信息

### 问题：文件下载失败

**原因：** 文件路径错误或文件不存在

**解决：**
1. 检查输出目录权限
2. 确认文件已成功生成
3. 查看服务器日志

## 💡 使用技巧

1. **长文本处理**：系统会自动切片处理，但处理时间可能较长，请耐心等待
2. **批量处理**：可以多次上传文件，每次处理一个
3. **结果保存**：建议及时下载结果文件，避免刷新页面丢失
4. **模式选择**：
   - 需要完整记录时选择"完整版"
   - 需要快速了解要点时选择"会议纪要"
   - 需要两者时选择"两者都生成"

## 🔒 安全提示

- 不要在公共网络环境下使用
- 敏感内容建议使用本地模型处理
- 定期清理输出目录中的文件
- 不要将 API 密钥提交到版本控制系统

